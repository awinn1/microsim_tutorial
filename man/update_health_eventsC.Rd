% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{update_health_eventsC}
\alias{update_health_eventsC}
\title{Vectorized Health Event Simulation with Randomization (C++)}
\usage{
update_health_eventsC(
  m_ind_traits,
  m_coef_ukpds_ind_traits,
  m_coef_ukpds_other_ind_traits
)
}
\arguments{
\item{m_ind_traits}{A numeric matrix with named columns containing patient
characteristics. It must include columns for event status (e.g., \code{"mi_event"})
and event history (e.g., \code{"mi_hist"}) for all simulated events.}

\item{m_coef_ukpds_ind_traits}{A numeric matrix of the main model coefficients,
with named columns corresponding to the risk equations (e.g., \code{"mi1_male"}).}

\item{m_coef_ukpds_other_ind_traits}{A numeric matrix of ancillary parameters
(\code{lambda}, \code{rho}) with corresponding named columns.}
}
\value{
A \code{NumericMatrix} with the same dimensions and dimnames as the input
\code{m_ind_traits}, but with updated values in the \verb{_event} and \verb{_hist} columns
reflecting the outcomes of the current simulation cycle.
}
\description{
Simulates the occurrence of a set of new health events for a cohort of
individuals over a single time step.

This function is a core part of the simulation engine and performs three
key operations:
\enumerate{
\item Updates the health history status for each patient.
\item Processes the list of possible health events in a \strong{random order} to
prevent any bias from a fixed sequence.
\item Simulates each event using the appropriate risk engine (\code{weibull_eventC} or
\code{logistic_eventC}), applying special logic for complex events.
}
}
\details{
This function uses the column names from the input matrices to find the
correct data, making it more robust than functions that rely on hardcoded
numeric indices.

The following events have special conditional logic:
\itemize{
\item \strong{\code{amp}}: First amputation risk depends on ulcer history. Second amputation
risk depends on first amputation history.
\item \strong{\code{mi}}: First MI risk is different for males and females. Second MI risk
is different from the first.
\item \strong{\code{stroke}}: Second stroke risk is different from the first.
\item \strong{\code{ulcer}}: Uses a logistic model instead of a Weibull model.
}

For all events, a new event can only occur if the patient does not have a
pre-existing history of that same event.
}
